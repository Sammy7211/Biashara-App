<h2 class="mb-4">Seller Dashboard</h2>

<p>Welcome, <%= user.name %>!</p>
<a href="/products/add" class="btn btn-primary mb-3">Add New Product</a>

<% if (products.length === 0) { %>
  <p>You have not added any products yet.</p>
<% } else { %>
  <table class="table table-bordered table-striped align-middle">
    <thead class="table-light">
      <tr>
        <th scope="col">Product</th>
        <th scope="col">Stock</th>
        <th scope="col">Price (KSh)</th>
        <th scope="col">Potential Earnings (KSh)</th>
        <th scope="col">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% products.forEach(p => { %>
        <tr>
          <td><%= p.name %></td>
          <td><%= p.quantity %></td>
          <td>KSh <%= p.price.toFixed(2) %></td>
          <td>KSh <%= (p.price * p.quantity).toFixed(2) %></td>
          <td>
            <form action="/products/delete/<%= p._id %>" method="POST" class="d-inline">
              <button type="submit" class="btn btn-danger btn-sm">Delete</button>
            </form>
            <a href="/products/edit/<%= p._id %>" class="btn btn-warning btn-sm">Edit</a>
          </td>
        </tr>
      <% }) %>
    </tbody>
  </table>

  <p class="fw-bold mt-3">
    Total Potential Earnings: KSh <%= totalEarnings.toFixed(2) %>
  </p>
<% } %>
